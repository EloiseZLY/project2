<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In!</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css"/>
    <!-- below are the styles from code awesome website -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/solid.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/main.css">
</head>

<body>
    <section class="header">
        <a href="#" class="logo"><i class="fa-solid fa-utensils"></i>BPQ331</a>
        <nav class="navbar">
            <a class="active" href="/index.html">home</a>
            <a href="">dishes</a>
            <a href="/index.html">about</a>
            <a href="/index.html">review</a>
            <a href="/index.html">order</a>
        </nav>
    
        <div class="icons">
            <i class="fas fa-bars" id="menu-bars"></i>
            <a href="login.html" class="fa-solid fa-right-to-bracket" id="login-button"></a>
            <a href="signIn.html" class="fa-regular fa-sign-hanging" id="isAuth"></a>
            <a class="fas fa-shopping-cart" id="motherfucker"></a> 
        </div>
    </section>
            
    <section class="cart_home">
        <h3 class="sub-heading">order now</h3>
        <h1 class="heading">free and fast</h1> 
        <div id="taskContainer">

        </div>
    </section>

    <div class="testforcart">
        <form action="/getCart" method="POST" id="testfoorcart" name="reqCart"></form>
    </div>
    
     <script src="./js/client.js" ></script>
     <script src="./js/order.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

     <script>
    //////////////////
    // FRONTEND
    //////////////////
    //const tasks_fake is a fake database
    // const tasks_fake = [{"proName": "Gongbao Chicken", "proPrice":"30", "proNum":"1"},
    //             {"proName": "MaPo Tofu", "proPrice":"30", "proNum":"1"},
    //             {"proName": "QingTao beer", "proPrice":"30", "proNum":"1"},
    //             {"proName": "Greenbeen cake", "proPrice":"30", "proNum":"1"}
    //              ]
    async function render(){
    const taskContainer = document.querySelector('#taskContainer');
    async function fetchTasks() {
    const result = await fetch("/getCart");
    console.log(result)
    const tasks = await result.json;
    console.log(result, tasks);
    return tasks;
    }

    async function renderTasks(){
    const tasks = await fetchTasks();
    for (let task of tasks) {
        const taskDiv = document.createElement("div");
        taskDiv.innerHTML = `<div class="div_raw"><div>task: ${task.proName} </div> <div>pay: ${task.proPrice}</div></div>`;
        taskContainer.appendChild(taskDiv);
    }
    console.log('sucessful render')
    }
    renderTasks();
    }
    render();
    </script>


</body> 
</html>